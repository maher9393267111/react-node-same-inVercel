(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{66:function(e,n,t){},69:function(e,n,t){"use strict";t.r(n);var a,r,i,o,s=t(22),c=t(2),d=t.n(c),l=t(50),u=t.n(l),m=(t.p,t(66),t(40)),j=t.n(m),b=t(51),g=t(36),p=t(8),h=t(56),O=t(83),v=t(33),x=t(80),f=(Object(x.a)(a||(a=Object(v.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),Object(x.a)(r||(r=Object(v.a)(["\nmutation addUser($username: String!, $email: String!, $password: String!) {\n  addUser(username: $username, email: $email, password: $password) {\n    token\n    user {\n      _id\n      username\n        \n  \n    }\n  }\n}"])))),k=(Object(x.a)(i||(i=Object(v.a)(["\n\n  mutation addFood($name: String!, $description: String!, $expiry: String, $imageUrl: String, $servings: String, $ingredients: String,) {\n    addFood(name: $name, description: $description, expiry: $expiry, imageUrl: $imageUrl, servings: $servings, ingredients: $ingredients) {\n      _id\n      name\n      donatedBy\n      description\n      servings\n      ingredients\n      imageUrl\n      expiry\n    }\n  }"]))),Object(x.a)(o||(o=Object(v.a)(["\n  mutation removeFood($foodId: ID!) {\n    removeFood(foodId: $foodId) {\n      _id\n      name\n      donatedBy\n      description\n      servings\n      imageUrl\n      ingredients\n      expiry\n    }\n  }\n  "]))),t(10)),y=t(11),w=t(41),$=new(function(){function e(){Object(k.a)(this,e)}return Object(y.a)(e,[{key:"getProfile",value:function(){return Object(w.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(w.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/Foods")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),S=t(6),I=function(){var e=Object(c.useState)({username:"",email:"",password:""}),n=Object(p.a)(e,2),t=n[0],a=n[1],r=Object(O.a)(f),i=Object(p.a)(r,2),o=i[0],d=i[1],l=d.error,u=d.data,m=function(e){var n=e.target,r=n.name,i=n.value;a(Object(s.a)(Object(s.a)({},t),{},Object(g.a)({},r,i)))},v=function(){var e=Object(b.a)(j.a.mark((function e(n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),e.prev=2,e.next=5,o({variables:Object(s.a)({},t)});case 5:a=e.sent,r=a.data,console.log(r),$.login(r.addUser.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}();return Object(S.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(S.jsx)("div",{className:"col-12 col-lg-10",children:Object(S.jsxs)("div",{className:"card",children:[Object(S.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(S.jsxs)("div",{className:"card-body",children:[u?Object(S.jsxs)("p",{children:["Success! You may now head"," ",Object(S.jsx)(h.a,{to:"/foods",children:"back to the Food Available."})]}):Object(S.jsxs)("form",{onSubmit:v,children:[Object(S.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:t.name,onChange:m}),Object(S.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:t.email,onChange:m}),Object(S.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:t.password,onChange:m}),Object(S.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(S.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})};var N=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"hello Vercel my name is maher 28 years old"}),Object(S.jsx)(I,{})]})},U=t(81),_=t(82),F=t(79),T=t(55),B=t(53),C=Object(T.a)({uri:"/graphql"}),D=Object(B.a)((function(e,n){var t=n.headers,a=localStorage.getItem("id_token");return{headers:Object(s.a)(Object(s.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),E=new U.a({link:D.concat(C),cache:new _.a});u.a.createRoot(document.getElementById("root")).render(Object(S.jsx)(d.a.StrictMode,{children:Object(S.jsx)(F.a,{client:E,children:Object(S.jsx)(N,{})})}))}},[[69,1,2]]]);
//# sourceMappingURL=main.25c829f1.chunk.js.map